# ========================================
# PHASE AGENT STAKING API - MAINNET PRODUCTION CONFIG
# ========================================
# 
# WARNING: This file contains production secrets.
# NEVER commit this file to version control.
# Ensure proper file permissions: chmod 600 .env.production
# 

# ========================================
# SERVER CONFIGURATION
# ========================================
PORT=3000
NODE_ENV=production
ENVIRONMENT=mainnet

# ========================================
# SOLANA MAINNET CONFIGURATION  
# ========================================

# Primary mainnet RPC (Alchemy - high performance)
SOLANA_RPC_URL=https://solana-mainnet.g.alchemy.com/v2/alcht_mainnet_api_key_replace_me

# Backup RPC endpoints (redundancy)
SOLANA_RPC_URL_BACKUP=https://api.mainnet-beta.solana.com
SOLANA_RPC_URL_TERTIARY=https://solana-api.projectserum.com
SOLANA_RPC_URL_QUATERNARY=https://rpc.ankr.com/solana

# Cluster designation
SOLANA_CLUSTER=mainnet-beta

# RPC connection settings
RPC_TIMEOUT_MS=30000
RPC_RETRY_ATTEMPTS=3
RPC_RETRY_DELAY_MS=1000

# ========================================
# PHASE MAINNET CONFIGURATION
# ========================================

# Production fee collection wallet (Phase Treasury)
# NOTE: Replace with actual Phase Labs mainnet treasury wallet
PHASE_FEE_WALLET=PhaseLabsTreasuryWalletMainnetPublicKey1234567890

# Phase validator vote account on mainnet
# NOTE: Replace with actual Phase Labs validator vote account
PHASE_VALIDATOR_VOTE_ACCOUNT=PhaseValidatorVoteAccountMainnetPubKey1234567890

# Fee structure (10 basis points = 0.1%)
RAKE_FEE_BASIS_POINTS=10
MANAGEMENT_FEE_BASIS_POINTS=50
PERFORMANCE_FEE_BASIS_POINTS=1000

# Minimum transaction amounts (in lamports)
MIN_STAKE_AMOUNT_LAMPORTS=1000000000  # 1 SOL minimum
MIN_UNSTAKE_AMOUNT_LAMPORTS=100000000 # 0.1 SOL minimum

# ========================================
# SECURITY & AUTHENTICATION
# ========================================

# Production API secret - MUST be 32+ characters
# NOTE: Generate using: openssl rand -hex 32
API_KEY_SECRET=replace_with_64_char_production_secret_generated_with_openssl_rand

# JWT configuration
JWT_SECRET=replace_with_jwt_production_secret_32_chars_minimum
JWT_EXPIRES_IN=24h

# CORS settings (production domains only)
CORS_ORIGINS=https://app.phase.finance,https://dashboard.phase.finance,https://api.phase.finance

# Rate limiting - Production settings (more restrictive)
RATE_LIMIT_WINDOW_MS=60000          # 1 minute
RATE_LIMIT_MAX_REQUESTS=50          # 50 requests per minute per IP
RATE_LIMIT_MAX_REQUESTS_AUTH=200    # 200 requests per minute for authenticated users

# API-specific rate limits
STAKING_RATE_LIMIT_PER_HOUR=10      # 10 stakes per hour per user
UNSTAKING_RATE_LIMIT_PER_HOUR=5     # 5 unstakes per hour per user

# ========================================
# MONITORING & LOGGING
# ========================================

# Production logging
LOG_LEVEL=info
LOG_FILE=logs/production.log
ERROR_LOG_FILE=logs/error.log
ACCESS_LOG_FILE=logs/access.log

# Log retention (days)
LOG_RETENTION_DAYS=30
ERROR_LOG_RETENTION_DAYS=90

# Application monitoring
SENTRY_DSN=https://your-sentry-dsn-here@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=1.0.0

# Performance monitoring
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key_here
NEW_RELIC_APP_NAME=phase-staking-api-production

# ========================================
# HEALTH CHECKS & RELIABILITY
# ========================================

# Health check configuration
HEALTH_CHECK_TIMEOUT_MS=10000
HEALTH_CHECK_INTERVAL_MS=30000
HEALTH_CHECK_RPC_TIMEOUT_MS=5000

# Circuit breaker settings
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_MS=60000
CIRCUIT_BREAKER_RESET_TIMEOUT_MS=30000

# Retry configuration
MAX_RETRIES=3
RETRY_DELAY_MS=1000
RETRY_EXPONENTIAL_BACKOFF=true

# ========================================
# DATABASE & CACHING (if applicable)
# ========================================

# Redis configuration (for caching/sessions)
REDIS_URL=redis://redis.phase.finance:6379
REDIS_PASSWORD=your_redis_production_password
REDIS_DB=0
REDIS_TTL_SECONDS=3600

# Database connection (if using PostgreSQL for logs/analytics)
DATABASE_URL=postgresql://phase_user:production_password@db.phase.finance:5432/phase_staking
DATABASE_POOL_SIZE=10
DATABASE_TIMEOUT_MS=30000

# ========================================
# EXTERNAL SERVICES
# ========================================

# Price feed APIs
COINGECKO_API_KEY=your_coingecko_pro_api_key
COINMARKETCAP_API_KEY=your_coinmarketcap_pro_api_key

# Notification services  
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/slack/webhook
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your/discord/webhook

# Email service (for alerts)
SENDGRID_API_KEY=your_sendgrid_api_key
ALERT_EMAIL=alerts@phaselabs.io

# ========================================
# FEATURE FLAGS
# ========================================

# Enable/disable features in production
ENABLE_LIQUID_STAKING=true
ENABLE_AUTO_COMPOUNDING=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_WEBHOOK_NOTIFICATIONS=true

# Maintenance mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System maintenance in progress. Please try again in 30 minutes."

# ========================================
# PERFORMANCE TUNING
# ========================================

# Node.js performance
NODE_OPTIONS="--max-old-space-size=2048 --enable-source-maps"
UV_THREADPOOL_SIZE=16

# Connection pooling
CONNECTION_POOL_SIZE=50
CONNECTION_TIMEOUT_MS=30000

# Request timeouts
REQUEST_TIMEOUT_MS=30000
SLOW_REQUEST_THRESHOLD_MS=5000

# ========================================
# BACKUP & DISASTER RECOVERY
# ========================================

# Backup configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=6
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=phase-staking-api-backups-prod

# ========================================
# COMPLIANCE & AUDITING
# ========================================

# Audit logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_FILE=logs/audit.log
AUDIT_LOG_RETENTION_DAYS=365

# Transaction logging (regulatory compliance)
TRANSACTION_LOG_ENABLED=true
TRANSACTION_LOG_S3_BUCKET=phase-compliance-logs-prod

# ========================================
# DEPLOYMENT INFO
# ========================================

# Deployment metadata
DEPLOYMENT_VERSION=1.0.0-mainnet
DEPLOYMENT_DATE=2026-03-01
DEPLOYED_BY=ross-agent
GIT_COMMIT_SHA=to_be_filled_by_ci_cd

# Infrastructure
CLUSTER_NAME=phase-mainnet-cluster
REGION=us-east-1
AVAILABILITY_ZONE=us-east-1a